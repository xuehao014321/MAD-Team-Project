# ğŸ”§ æœåŠ¡å™¨é”™è¯¯é—®é¢˜è§£å†³æŒ‡å—

## ğŸ” é—®é¢˜è¯Šæ–­

æ ¹æ®ä½ çš„æƒ…å†µï¼Œæˆ‘å‘ç°äº†ä»¥ä¸‹é—®é¢˜ï¼š

### 1. ç°çŠ¶åˆ†æ
- âœ… Androidå®¢æˆ·ç«¯ä»£ç å·²æ­£ç¡®é…ç½®ï¼Œè¿æ¥åˆ° `http://192.168.0.104:5000/api/`
- âŒ **ä¸»è¦é—®é¢˜**: å½“å‰è¿è¡Œçš„æœåŠ¡å™¨ä¸æ˜¯æˆ‘ä»¬åˆ›å»ºçš„å®Œæ•´APIæœåŠ¡å™¨
- âš ï¸ ç°æœ‰æœåŠ¡å™¨åªè¿”å› "NeighborLink API" æµ‹è¯•å“åº”ï¼Œç¼ºå°‘æ³¨å†Œ/ç™»å½•åŠŸèƒ½

### 2. æœåŠ¡å™¨çŠ¶æ€æ£€æŸ¥
```bash
# æµ‹è¯•ç»“æœæ˜¾ç¤º
curl http://192.168.0.104:5000/api/test
# è¿”å›: {"message":"âœ… NeighborLink API is running!","local_ip":"192.168.0.104","port":5000}

# ä½†æ˜¯æ³¨å†ŒAPIä¸å¯ç”¨
POST http://192.168.0.104:5000/api/register
# é¢„æœŸä¼šå¤±è´¥æˆ–è¿”å›é”™è¯¯
```

## ğŸ› ï¸ è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ1: å¯åŠ¨å®Œæ•´çš„APIæœåŠ¡å™¨ï¼ˆæ¨èï¼‰

#### æ­¥éª¤1: åœæ­¢ç°æœ‰æœåŠ¡å™¨
```bash
# æŸ¥æ‰¾è¿è¡Œåœ¨ç«¯å£5000çš„è¿›ç¨‹
netstat -ano | findstr :5000

# å¦‚æœæ‰¾åˆ°è¿›ç¨‹IDï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åœæ­¢
taskkill /PID <è¿›ç¨‹ID> /F
```

#### æ­¥éª¤2: å¯åŠ¨æˆ‘ä»¬çš„å®Œæ•´æœåŠ¡å™¨
```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•è¿è¡Œ
node server.js
```

#### æ­¥éª¤3: éªŒè¯æœåŠ¡å™¨åŠŸèƒ½
```bash
# æµ‹è¯•è¿æ¥
curl http://192.168.0.104:5000/api/test

# æµ‹è¯•æ³¨å†ŒåŠŸèƒ½
curl -X POST http://192.168.0.104:5000/api/register ^
  -H "Content-Type: application/json" ^
  -d "{\"username\":\"testuser\",\"email\":\"test@example.com\",\"password\":\"123456\",\"phone\":\"1234567890\",\"gender\":\"male\"}"
```

### æ–¹æ¡ˆ2: ä½¿ç”¨ä¸åŒç«¯å£ï¼ˆå¤‡é€‰æ–¹æ¡ˆï¼‰

å¦‚æœæ— æ³•åœæ­¢ç°æœ‰æœåŠ¡å™¨ï¼Œå¯ä»¥ä¿®æ”¹æˆ‘ä»¬çš„æœåŠ¡å™¨ç«¯å£ï¼š

#### ä¿®æ”¹æœåŠ¡å™¨ç«¯å£
```javascript
// åœ¨ server.js ä¸­ä¿®æ”¹
const PORT = 5001; // æ”¹ä¸º5001æˆ–å…¶ä»–å¯ç”¨ç«¯å£
const HOST = '192.168.0.104';
```

#### ç›¸åº”ä¿®æ”¹Androidå®¢æˆ·ç«¯
```kotlin
// åœ¨ RetrofitClient.kt ä¸­ä¿®æ”¹
private const val BASE_URL = "http://192.168.0.104:5001/api/"
```

## ğŸ“‹ å®Œæ•´å¯åŠ¨æ­¥éª¤

### 1. å‡†å¤‡ç¯å¢ƒ
```bash
# ç¡®ä¿åœ¨é¡¹ç›®æ ¹ç›®å½•
cd "C:\Users\User\Downloads\MAD-Team-Project.hao\MAD-Team-Project.hao"

# ç¡®ä¿ä¾èµ–å·²å®‰è£…
npm install
```

### 2. å¯åŠ¨æœåŠ¡å™¨
```bash
# å¯åŠ¨å®Œæ•´APIæœåŠ¡å™¨
npm start
```

### 3. éªŒè¯æœåŠ¡å™¨åŠŸèƒ½
å¯åŠ¨åä½ åº”è¯¥çœ‹åˆ°ä»¥ä¸‹è¾“å‡ºï¼š
```
ğŸš€ æœåŠ¡å™¨å¯åŠ¨æˆåŠŸï¼
ğŸ“ æœåŠ¡å™¨åœ°å€: http://192.168.0.104:5000
ğŸ”— APIåŸºç¡€è·¯å¾„: http://192.168.0.104:5000/api
ğŸ“ å¯ç”¨çš„APIç«¯ç‚¹:
   GET  /api/test          - æµ‹è¯•è¿æ¥
   POST /api/register      - ç”¨æˆ·æ³¨å†Œ
   POST /api/login         - ç”¨æˆ·ç™»å½•
   GET  /api/users         - è·å–æ‰€æœ‰ç”¨æˆ·
   GET  /api/users/:id     - è·å–ç‰¹å®šç”¨æˆ·
   GET  /health            - å¥åº·æ£€æŸ¥
```

## ğŸ§ª æµ‹è¯•APIåŠŸèƒ½

### PowerShellæµ‹è¯•å‘½ä»¤

#### 1. æµ‹è¯•è¿æ¥
```powershell
Invoke-RestMethod -Uri "http://192.168.0.104:5000/api/test"
```

#### 2. æµ‹è¯•ç”¨æˆ·æ³¨å†Œ
```powershell
$body = @{
    username = "testuser"
    email = "test@example.com"
    password = "123456"
    phone = "1234567890"
    gender = "male"
} | ConvertTo-Json

Invoke-RestMethod -Uri "http://192.168.0.104:5000/api/register" -Method POST -Body $body -ContentType "application/json"
```

#### 3. æµ‹è¯•ç”¨æˆ·ç™»å½•
```powershell
$loginBody = @{
    identifier = "testuser"
    password = "123456"
} | ConvertTo-Json

Invoke-RestMethod -Uri "http://192.168.0.104:5000/api/login" -Method POST -Body $loginBody -ContentType "application/json"
```

#### 4. è·å–ç”¨æˆ·åˆ—è¡¨
```powershell
Invoke-RestMethod -Uri "http://192.168.0.104:5000/api/users"
```

## ğŸ” å¸¸è§é”™è¯¯æ’æŸ¥

### é”™è¯¯1: "Connection refused" æˆ– "ç½‘ç»œé”™è¯¯"
**åŸå› **: æœåŠ¡å™¨æœªå¯åŠ¨æˆ–ç«¯å£è¢«å ç”¨
**è§£å†³**:
1. æ£€æŸ¥æœåŠ¡å™¨æ˜¯å¦æ­£åœ¨è¿è¡Œ
2. æ£€æŸ¥ç«¯å£5000æ˜¯å¦è¢«å…¶ä»–ç¨‹åºå ç”¨
3. ç¡®ä¿é˜²ç«å¢™å…è®¸ç«¯å£5000çš„è¿æ¥

### é”™è¯¯2: "404 Not Found"
**åŸå› **: APIç«¯ç‚¹ä¸å­˜åœ¨
**è§£å†³**:
1. ç¡®ä¿ä½¿ç”¨æ­£ç¡®çš„APIè·¯å¾„ (`/api/register`, `/api/login`)
2. æ£€æŸ¥æœåŠ¡å™¨æ˜¯å¦æ­£ç¡®å®ç°äº†æ‰€æœ‰ç«¯ç‚¹

### é”™è¯¯3: "500 Internal Server Error"
**åŸå› **: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯
**è§£å†³**:
1. æ£€æŸ¥æœåŠ¡å™¨æ§åˆ¶å°çš„é”™è¯¯æ—¥å¿—
2. ç¡®ä¿ `users.json` æ–‡ä»¶æƒé™æ­£ç¡®
3. æ£€æŸ¥è¯·æ±‚æ•°æ®æ ¼å¼æ˜¯å¦æ­£ç¡®

### é”™è¯¯4: "400 Bad Request"
**åŸå› **: è¯·æ±‚æ•°æ®æ ¼å¼é”™è¯¯æˆ–ç¼ºå°‘å¿…å¡«å­—æ®µ
**è§£å†³**:
1. ç¡®ä¿è¯·æ±‚åŒ…å«æ‰€æœ‰å¿…å¡«å­—æ®µï¼ˆusername, email, passwordï¼‰
2. æ£€æŸ¥JSONæ ¼å¼æ˜¯å¦æ­£ç¡®
3. éªŒè¯é‚®ç®±æ ¼å¼æ˜¯å¦æœ‰æ•ˆ

## ğŸ“Š æ•°æ®å­˜å‚¨

æœåŠ¡å™¨ä¼šåœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `users.json` æ–‡ä»¶æ¥å­˜å‚¨ç”¨æˆ·æ•°æ®ï¼š

```json
[
  {
    "user_id": "1725886204123abc456",
    "username": "testuser",
    "email": "test@example.com",
    "phone": "1234567890",
    "gender": "male",
    "distance": 0,
    "created_at": "2025-09-09T12:50:04.123Z"
  }
]
```

## âœ… æˆåŠŸæ ‡å¿—

å½“ä¸€åˆ‡æ­£å¸¸å·¥ä½œæ—¶ï¼Œä½ åº”è¯¥èƒ½å¤Ÿï¼š

1. **Androidåº”ç”¨**:
   - ç‚¹å‡»"Sign Up"æŒ‰é’®æˆåŠŸæ³¨å†Œç”¨æˆ·
   - ç‚¹å‡»"ğŸ”§ Test Server Connection"çœ‹åˆ°ç»¿è‰²æˆåŠŸæ¶ˆæ¯
   - æ³¨å†ŒæˆåŠŸåè‡ªåŠ¨è·³è½¬åˆ°ç™»å½•é¡µé¢

2. **æœåŠ¡å™¨ç«¯**:
   - åœ¨æ§åˆ¶å°çœ‹åˆ°è¯¦ç»†çš„è¯·æ±‚æ—¥å¿—
   - `users.json` æ–‡ä»¶ä¸­å‡ºç°æ–°æ³¨å†Œçš„ç”¨æˆ·æ•°æ®
   - æ‰€æœ‰APIæµ‹è¯•è¿”å›æ­£ç¡®çš„JSONå“åº”

## ğŸš€ ä¸‹ä¸€æ­¥

ä¸€æ—¦æœåŠ¡å™¨æ­£å¸¸è¿è¡Œï¼š
1. æµ‹è¯•Androidåº”ç”¨çš„å®Œæ•´æ³¨å†Œæµç¨‹
2. æµ‹è¯•ç™»å½•åŠŸèƒ½
3. éªŒè¯æ•°æ®æŒä¹…åŒ–ï¼ˆé‡å¯æœåŠ¡å™¨åæ•°æ®ä»å­˜åœ¨ï¼‰
4. å¯ä»¥å¼€å§‹å¼€å‘å…¶ä»–åŠŸèƒ½ï¼ˆç”¨æˆ·èµ„æ–™ã€è®¾ç½®ç­‰ï¼‰

å¦‚æœä»æœ‰é—®é¢˜ï¼Œè¯·æä¾›å…·ä½“çš„é”™è¯¯æ¶ˆæ¯ï¼Œæˆ‘ä¼šè¿›ä¸€æ­¥å¸®åŠ©ä½ è§£å†³ï¼ 